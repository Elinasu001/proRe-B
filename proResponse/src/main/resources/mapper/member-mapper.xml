<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.even.back.member.model.mapper.MemberMapper">
	
	
	
	<select id="countByEmail">
		SELECT
		       COUNT(*)
		  FROM
		       TB_MEMBER
		 WHERE
		       email = #{email}           
	</select>
	
	
	<insert id="signUp" parameterType="MemberVO">
	<selectKey keyProperty="userNo" order="BEFORE" resultType="long">
		select SEQ_MEMBER.nextval FROM DUAL
	</selectKey>
		INSERT
		  INTO
		       TB_MEMBER
		       (
		       USER_NO
		     , EMAIL
		     , USER_PWD
		     , USER_NAME
		     , NICKNAME
		     , PHONE
		     , BIRTHDAY
		     , GENDER
		     , POSTCODE
		     , ADDRESS
		     , ADDRESS_DETAIL
		     , CREATE_DATE 
		     , PROFILE_IMG
		       )
	    VALUES
	           (
	           #{userNo}
	         , #{email}
	         , #{userPwd}
	         , #{userName}
	         , #{nickname}
	         , #{phone}
	         , #{birthday}
	         , #{gender}
	         , #{postcode}
	         , #{address}
	         , #{addressDetail}
	         , SYSDATE  
	         , #{profileImgPath}
	           )	            
	</insert>
	
	<insert id="saveLocation" parameterType="MemberVO">
		INSERT
		  INTO
		       TB_MEMBER_LOCATION
		       (
		       USER_NO
		     , LAT
		     , LNG  
		       )
		VALUES
		       (
		       #{userNo}
		     , #{latitude}
		     , #{longitude} 
		       )      
	</insert>
	
</mapper>